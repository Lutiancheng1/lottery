# PC28 动态号码池使用指南

## 功能说明
`dynamic_hot_pool.py` 实现了**实时动态号码池生成器**，可以：
- ✅ 每一期都更新号码池
- ✅ 基于三年滚动窗口统计
- ✅ 自动计算Top 875热门号码

## 核心逻辑
给定当前时刻 T（例如 2026-01-11 19:16:00）：
1. 数据范围：从 `T - 3年` 到 `T` 的所有历史记录
2. 统计每个号码组合的出现频次
3. 返回频次最高的前875种号码

## 测试结果（2026-01-11 19:16:00）
```
数据窗口: 2023-01-11 00:00:00 到 2026-01-11 19:16:00
窗口内记录数: 315,169 条
唯一号码种类: 1000 种
热门池大小: 875 种
第875名频次: 295次
最高频次: 370次 (号码 0,7,2)
```

## 快速使用

### 方法1: 作为独立模块
```python
from dynamic_hot_pool import DynamicHotPool
from datetime import datetime

# 初始化
pool = DynamicHotPool(r"数据\pc28_data_repaired.txt")

# 获取当前时刻的热门号码池
current_time = datetime.now()
hot_pool, frequency_stats = pool.get_hot_pool(current_time, top_n=875)

# hot_pool 是一个 set，包含875个号码字符串，如 {"0,7,2", "7,2,7", ...}
print(f"热门号码池大小: {len(hot_pool)}")

# 检查某个号码是否在热门池中
if "2,3,5" in hot_pool:
    print("号码 2,3,5 在热门池中")
```

### 方法2: 获取统计信息
```python
stats = pool.get_pool_stats(current_time, top_n=875)
print(f"窗口内记录数: {stats['window_records']}")
print(f"第875名频次: {stats['cutoff_frequency']}")
```

## 集成到现有系统

### 示例：在投注前检查号码
```python
# 在 live_betting_simulator.py 中集成

from dynamic_hot_pool import DynamicHotPool
from datetime import datetime

# 初始化（程序启动时执行一次）
hot_pool_generator = DynamicHotPool(r"数据\pc28_data_repaired.txt")

# 每次准备投注时
def should_bet(numbers):
    """判断号码是否在热门池中"""
    current_time = datetime.now()
    hot_pool, _ = hot_pool_generator.get_hot_pool(current_time, top_n=875)
    
    # numbers 格式如 "2,3,5"
    return numbers in hot_pool

# 使用
if should_bet("0,7,2"):
    print("此号码在热门池中，建议投注")
else:
    print("此号码不在热门池中，谨慎投注")
```

## 性能优化建议
- 首次加载数据需要几秒钟（55万条记录）
- 建议程序启动时加载一次，然后重复使用同一个实例
- 每次调用 `get_hot_pool()` 约需 0.1-0.2秒

## 下一步
如需将此模块完全集成到您的投注系统，请告知具体需求。
