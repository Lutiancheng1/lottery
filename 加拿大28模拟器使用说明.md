# 加拿大28实时投注模拟器 - 使用说明

## 🎯 程序功能

这是一个全新创建的简化版实时投注模拟器，专为加拿大28游戏设计。

**核心功能：**
- ✅ Token登录认证
- ✅ 实时开奖数据获取
- ✅ 自动投注模拟  
- ✅ 盈亏计算和统计
- ✅ 实时盈亏曲线图
- ✅ 历史记录查看
- ✅ 数据导出（Excel）
- ✅ 开奖倒计时（4分钟间隔）
- ✅ Token过期自动检测

## 🚀 使用步骤

### 第一步：登录

1. 运行程序：`python canada28_simulator.py`
2. 点击右上角"🔑 登录"按钮
3. 在弹出窗口中粘贴Token
4. 点击"确认登录"

**如何获取Token：**
1. 浏览器打开 http://s1.pk999p.xyz/
2. 登录您的账号
3. 按F12打开开发者工具
4. 切换到"Network"（网络）标签
5. 刷新页面或任意操作
6. 点击任意请求
7. 在"Request Headers"中找到"token"字段
8. 复制token值（通常以"eyJ"开头的长字符串）

### 第二步：导入号码

1. 点击"从TXT导入"按钮
2. 选择您的号码文件（每行一个3位数字）
3. 确认导入成功

**号码文件格式示例：**
```
123
456
789
...
```

### 第三步：设置参数（可选）

在"参数设置"面板中可以调整：
- **赔率**：默认995（买1元中奖得995元）
- **基础投入**：默认1750元
- **输递增(%)**：默认2%（输了后增加的比例）
- **赢递减(%)**：默认2%（赢了后减少的比例）

点击"应用设置"保存。

### 第四步：开始模拟

1. 点击"🔄 手动刷新"按钮查看最新开奖
2. 确认一切正常后，点击"▶ 开始模拟"
3. 程序会自动：
   - 每4分钟刷新获取新开奖
   - 自动判断中奖情况
   - 计算盈亏并更新投注额
   - 更新图表和历史记录

## 📊 界面说明

### 左侧面板

**1. 当前状态**
- 当前投入：下一期的投注总额
- 累计盈亏：总盈亏金额
- 总流水：累计投注总额
- 统计信息：总期数、中奖次数
- 极值统计：最高投注、最高盈利、最大亏损

**2. 参数设置**
- 可调整赔率、基础投入、递增/递减比例

**3. 号码导入**
- 导入并查看您的投注号码

**4. 实时开奖**
- 显示最新开奖号码、期号
- 下期倒计时
- 手动刷新按钮

### 右侧面板

**5. 盈亏曲线**
- 实时显示累计盈亏走势图
- 红色虚线为0轴

**6. 历史记录**
- 显示最近30期的详细记录
- 包括期号、开奖、投入、结果、盈亏等

### 底部控制

- **▶ 开始模拟**：启动自动模拟
- **⏹ 停止**：停止模拟
- **🔄 重置**：清空所有历史数据
- **📥 导出**：导出历史记录到Excel

## ⚠️ 注意事项

1. **Token有效期**
   - Token通常有过期时间（几小时到几天）
   - 如提示"Token已过期"，需重新登录获取新token

2. **开奖间隔**
   - 根据历史数据分析，开奖间隔约为4分钟
   - 倒计时仅供参考，实际可能有偏差

3. **网络连接**
   - 需要稳定的网络连接
   - 如果请求失败，可点击"手动刷新"重试

4. **数据安全**
   - 所有数据仅保存在本地
   - 关闭程序后数据会丢失（除非导出）

5. **投注逻辑**
   - 输了：增加投注额（比例+固定金额）
   - 赢了：连续赢够之前输的次数后开始递减
   - 这是逐期对冲策略

## 🔧 常见问题

### Q: 为什么显示"未登录"？
A: 点击右上角"🔑 登录"按钮，输入从浏览器获取的Token。

### Q: Token从哪里获取？
A: 
1. 浏览器登录 http://s1.pk999p.xyz/
2. F12打开开发者工具
3. Network标签中任意请求的Request Headers里找token

### Q: 提示"Token已过期"怎么办？
A: 重新从浏览器获取新的Token并登录。

### Q: 如何查看历史数据？
A: 点击底部"📥 导出"按钮，保存为Excel文件查看完整历史。

### Q: 盈亏曲线不更新？
A: 确保已点击"▶ 开始模拟"，并且有新的开奖产生。

### Q: 倒计时不准怎么办？
A: 倒计时基于上期开奖时间+4分钟估算，实际可能有偏差，可手动刷新。

## 📁 相关文件

- `canada28_simulator.py` - 主程序（本文件）
- `live_betting_simulator_backup_3d.py` - 原版程序（备份）
- `Canada_data/` - 历史数据文件夹

## 🎉 特点优势

相比原版程序，本简化版：
- ✅ 代码更简洁（650行 vs 1300行）
- ✅ 界面更清晰（单页布局）
- ✅ 专为加拿大28优化
- ✅ Token登录集成
- ✅ 保留所有核心功能
- ✅ 更易维护和修改

## 💡 下一步

建议您：
1. 先熟悉界面和功能
2. 使用小额参数测试
3. 观察几期验证逻辑正确性
4. 根据实际情况调整参数

祝您使用愉快！🚀
